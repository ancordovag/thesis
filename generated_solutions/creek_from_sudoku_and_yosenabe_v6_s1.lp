% All the possible directions
dir(0,1). dir(0,-1). dir(1,0). dir(-1,0). 

% A cell is connected to another cell if they are adjacent and both are white
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X = I, Y = J, black(X,Y), black(I,J).
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X = I, Y = J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J.

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X != I, Y != J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J, connected(X,Y,X+DX,Y+DY).

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them, and there is a path between the other cell and the first cell
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X != I, Y != J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J, connected(X,Y,X+DX,Y+DY), connected(I,J,I-DX,J-DY).

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them, and there is a path between the other cell and the first cell, and there is a path between the first cell and the second cell
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X != I, Y != J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J, connected(X,Y,X+DX,Y+DY), connected(I,J,I-DX,J-DY), connected(X,Y,I,J).

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them, and there is a path between the other cell and the first cell, and there is a path between the first cell and the second cell, and there is a path between the second cell and the third cell
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X != I, Y != J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J, connected(X,Y,X+DX,Y+DY), connected(I,J,I-DX,J-DY), connected(X,Y,I,J), connected(I,J,I+DX,J+DY).

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them, and there is a path between the other cell and the first cell, and there is a path between the first cell and the second cell, and there is a path between the second cell and the third cell, and there is a path between the third cell and the fourth cell
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X != I, Y != J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J, connected(X,Y,X+DX,Y+DY), connected(I,J,I-DX,J-DY), connected(X,Y,I,J), connected(I,J,I+DX,J+DY), connected(I,J,I+2*DX,J+2*DY).

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them, and there is a path between the other cell and the first cell, and there is a path between the first cell and the second cell, and there is a path between the second cell and the third cell, and there is a path between the third cell and the fourth cell, and there is a path between the fourth cell and the fifth cell
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X != I, Y != J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J, connected(X,Y,X+DX,Y+DY), connected(I,J,I-DX,J-DY), connected(X,Y,I,J), connected(I,J,I+DX,J+DY), connected(I,J,I+2*DX,J+2*DY), connected(I,J,I+3*DX,J+3*DY).

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them, and there is a path between the other cell and the first cell, and there is a path between the first cell and the second cell, and there is a path between the second cell and the third cell, and there is a path between the third cell and the fourth cell, and there is a path between the fourth cell and the fifth cell, and there is a path between the fifth cell and the sixth cell
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X != I, Y != J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J, connected(X,Y,X+DX,Y+DY), connected(I,J,I-DX,J-DY), connected(X,Y,I,J), connected(I,J,I+DX,J+DY), connected(I,J,I+2*DX,J+2*DY), connected(I,J,I+3*DX,J+3*DY), connected(I,J,I+4*DX,J+4*DY).

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them, and there is a path between the other cell and the first cell, and there is a path between the first cell and the second cell, and there is a path between the second cell and the third cell, and there is a path between the third cell and the fourth cell, and there is a path between the fourth cell and the fifth cell, and there is a path between the fifth cell and the sixth cell, and there is a path between the sixth cell and the seventh cell
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X != I, Y != J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J, connected(X,Y,X+DX,Y+DY), connected(I,J,I-DX,J-DY), connected(X,Y,I,J), connected(I,J,I+DX,J+DY), connected(I,J,I+2*DX,J+2*DY), connected(I,J,I+3*DX,J+3*DY), connected(I,J,I+4*DX,J+4*DY), connected(I,J,I+5*DX,J+5*DY).

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them, and there is a path between the other cell and the first cell, and there is a path between the first cell and the second cell, and there is a path between the second cell and the third cell, and there is a path between the third cell and the fourth cell, and there is a path between the fourth cell and the fifth cell, and there is a path between the fifth cell and the sixth cell, and there is a path between the sixth cell and the seventh cell, and there is a path between the seventh cell and the eighth cell
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X != I, Y != J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J, connected(X,Y,X+DX,Y+DY), connected(I,J,I-DX,J-DY), connected(X,Y,I,J), connected(I,J,I+DX,J+DY), connected(I,J,I+2*DX,J+2*DY), connected(I,J,I+3*DX,J+3*DY), connected(I,J,I+4*DX,J+4*DY), connected(I,J,I+5*DX,J+5*DY), connected(I,J,I+6*DX,J+6*DY).

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them, and there is a path between the other cell and the first cell, and there is a path between the first cell and the second cell, and there is a path between the second cell and the third cell, and there is a path between the third cell and the fourth cell, and there is a path between the fourth cell and the fifth cell, and there is a path between the fifth cell and the sixth cell, and there is a path between the sixth cell and the seventh cell, and there is a path between the seventh cell and the eighth cell, and there is a path between the eighth cell and the ninth cell
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X != I, Y != J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J, connected(X,Y,X+DX,Y+DY), connected(I,J,I-DX,J-DY), connected(X,Y,I,J), connected(I,J,I+DX,J+DY), connected(I,J,I+2*DX,J+2*DY), connected(I,J,I+3*DX,J+3*DY), connected(I,J,I+4*DX,J+4*DY), connected(I,J,I+5*DX,J+5*DY), connected(I,J,I+6*DX,J+6*DY), connected(I,J,I+7*DX,J+7*DY).

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them, and there is a path between the other cell and the first cell, and there is a path between the first cell and the second cell, and there is a path between the second cell and the third cell, and there is a path between the third cell and the fourth cell, and there is a path between the fourth cell and the fifth cell, and there is a path between the fifth cell and the sixth cell, and there is a path between the sixth cell and the seventh cell, and there is a path between the seventh cell and the eighth cell, and there is a path between the eighth cell and the ninth cell, and there is a path between the ninth cell and the tenth cell
connected(X,Y,I,J) :- cell(X,Y), cell(I,J), X != I, Y != J, not black(X,Y), not black(I,J), dir(DX,DY), X+DX = I, Y+DY = J, connected(X,Y,X+DX,Y+DY), connected(I,J,I-DX,J-DY), connected(X,Y,I,J), connected(I,J,I+DX,J+DY), connected(I,J,I+2*DX,J+2*DY), connected(I,J,I+3*DX,J+3*DY), connected(I,J,I+4*DX,J+4*DY), connected(I,J,I+5*DX,J+5*DY), connected(I,J,I+6*DX,J+6*DY), connected(I,J,I+7*DX,J+7*DY), connected(I,J,I+8*DX,J+8*DY).

% A cell is connected to another cell if they are adjacent and both are white, and there is a path between them, and there is a path between the other cell and the first cell, and there is a path between the first cell and the second cell, and there is a path between the second cell and the third cell, and there is a path between the third cell and the fourth cell, and there is a path between the fourth cell and the fifth cell, and there is a path between the fifth cell and the sixth cell, and there is a path between the sixth cell and the seventh cell, and there is a path between the seventh cell and the eighth cell, and there is a path between the eighth cell and the ninth cell, and there is a path between the ninth cell and the tenth cell, and there is a path between the tenth cell and the eleventh cell
connected(X,Y,I,J) :- cell(X,Y),